(function (cjs, an) {

var p; // shortcut to reference prototypes
var lib={};var ss={};var img={};
lib.ssMetadata = [];


// symbols:
// helper functions:

function mc_symbol_clone() {
	var clone = this._cloneProps(new this.constructor(this.mode, this.startPosition, this.loop));
	clone.gotoAndStop(this.currentFrame);
	clone.paused = this.paused;
	clone.framerate = this.framerate;
	return clone;
}

function getMCSymbolPrototype(symbol, nominalBounds, frameBounds) {
	var prototype = cjs.extend(symbol, cjs.MovieClip);
	prototype.clone = mc_symbol_clone;
	prototype.nominalBounds = nominalBounds;
	prototype.frameBounds = frameBounds;
	return prototype;
	}


(lib.an_TextInput = function(options) {
	this._element = new $.an.TextInput(options);
	this._el = this._element.create();
	var $this = this;
	this.addEventListener('added', function() {
		$this._lastAddedFrame = $this.parent.currentFrame;
		$this._element.attach($('#dom_overlay_container'));
	});
}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(0,0,100,22);

p._tick = _tick;
p._handleDrawEnd = _handleDrawEnd;
p._updateVisibility = _updateVisibility;



(lib.Símbolo2 = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});

	// Capa_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f("#00FF00").s().p("Am+G/Qi6i5AAkGQAAkFC6i5QC5i5EFgBQEGABC5C5QC6C5AAEFQAAEGi6C5Qi5C6kGAAQkFAAi5i6g");
	this.shape.setTransform(63.3,63.3);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

}).prototype = getMCSymbolPrototype(lib.Símbolo2, new cjs.Rectangle(0,0,126.5,126.5), null);


(lib.Símbolo1 = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});

	// Capa_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f("#00FF00").s().p("AiaCaQhAhAAAhaQAAhZBAhBQBBhABZAAQBaAABABAQBBBBAABZQAABahBBAQhABBhaAAQhZAAhBhBg");
	this.shape.setTransform(21.9,21.9);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

}).prototype = getMCSymbolPrototype(lib.Símbolo1, new cjs.Rectangle(0,0,43.8,43.8), null);


(lib.limite = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});

	// Capa_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f("#591815").s().p("Ay2ZAQi6AAhZikQgxhZAFhWQAFhWA6hLQBiiBChgBQBcgBAxgCQBHgDA6gJQB/gTBWgaQB1gjBYg9QBphGBCh6QAYgsATg4QAMgnAShHQAchuAEicQADheACh3QAFk1AvjYQA7kSCJjUQCukKExh/QCwhKDWgfQCGgTCBgDIABAAIADgBIBWAAIAUADIAtALQCwA6AqC+QAcB/hMBqQhHBhh2AeQgkAJhKAAIgEAAQjcABiuA+QizBAhXCcQgYArgTA6QgOAngRBEQgRBFgIBUQgFA6gDBbIgDB7QgECegFBlQgTFGhoEEQhZDficCmQiNCYjSBjQiyBUjeAqQjdApj2AAgAR74gQiAADiEATQjSAfitBIQkpB8ioEBQiGDNg6EPQguDYgFEvQgCB4gDBeQgFClgcBsQgRBHgOApQgTA7gZAtQhGB/hvBMQhcA/h4AkQhYAbiCAUQg8AJhIADQgyAChdABQiSABhZB1QhrCLBaClQBRCTCoABQD0ACDjgrQDZgoCwhTQDKhfCMiWQCWigBYjbQBmj/ATlCQAFhlAEidIADh7QADhcAFg8QAJhWARhGQAShGAOgpQATg7AaguQBcilC+hEQCyhADigBIAEAAQBGAAAhgIQB5gfA8hkQA4hdgWhlQgmitihg1QgNgFgbgEIgTgDIhMAAIgJABg");
	this.shape.setTransform(247.3,259.2,1.62,1.62);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

}).prototype = getMCSymbolPrototype(lib.limite, new cjs.Rectangle(0,0,494.6,518.5), null);


(lib.Interpolación7 = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});

	// Capa_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("rgba(153,0,0,0.969)").ss(1,1,1).p("AHgAAQAADHiMCNQiNCMjHAAQjGAAiNiMQiMiNAAjHQAAjGCMiNQCNiMDGAAQDHAACNCMQCMCNAADGg");

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#000000").s().p("AlSFTQiNiMAAjHQAAjGCNiMQCMiNDGAAQDHAACMCNQCNCMAADGQAADHiNCMQiMCNjHAAQjGAAiMiNg");

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape}]}).wait(1));

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-49,-49,98,98);


(lib.Interpolación6 = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});

	// Capa_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("rgba(153,0,0,0.969)").ss(1,1,1).p("AOtAAQAAInkUGGQkTGFmGAAQmFAAkTmFQkUmGAAonQAAomEUmGQETmFGFAAQGGAAETGFQEUGGAAImg");

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#000000").s().p("AqYOsQkTmFgBonQABomETmGQEUmFGEAAQGFAAEUGFQETGGAAImQAAInkTGFQkUGGmFAAQmEAAkUmGg");

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape}]}).wait(1));

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-95,-134,190.1,268);


(lib.Interpolación5 = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});

	// Capa_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("rgba(153,0,0,0.969)").ss(1,1,1).p("AjEp3IGJAAIAATvImJAAg");

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#000000").s().p("AjEJ4IAAzvIGJAAIAATvg");

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape}]}).wait(1));

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-20.7,-64.2,41.4,128.5);


(lib.Interpolación4 = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});

	// Capa_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("rgba(153,0,0,0.969)").ss(1,1,1).p("AjEp3IGJAAIAATvImJAAg");

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#000000").s().p("AjEJ4IAAzvIGJAAIAATvg");

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape}]}).wait(1));

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-20.7,-64.2,41.4,128.5);


(lib.Interpolación3 = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});

	// Capa_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("rgba(153,0,0,0.969)").ss(1,1,1).p("AHBnmIDFFVIxGJ4IjFlVg");

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#000000").s().p("AqFCSIRGp4IDFFVIxGJ4g");

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape}]}).wait(1));

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-65.6,-49.6,131.3,99.4);


(lib.Interpolación2 = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});

	// Capa_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f().s("rgba(153,0,0,0.969)").ss(1,1,1).p("AqFiRIDFlVIRGJ4IjFFVg");

	this.shape_1 = new cjs.Shape();
	this.shape_1.graphics.f("#000000").s().p("AqFiRIDFlVIRGJ4IjFFVg");

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.shape_1},{t:this.shape}]}).wait(1));

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-65.6,-49.6,131.2,99.4);


(lib.TargetOBJ = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});

	// Capa_2
	this.box = new lib.Símbolo2();
	this.box.name = "box";
	this.box.parent = this;
	this.box.setTransform(0,0,1,1,0,0,0,63.2,63.2);

	this.timeline.addTween(cjs.Tween.get(this.box).wait(1));

	// Capa_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f("rgba(153,0,0,0.569)").s().p("AxqRqQnTnUAAqWQAAqVHTnVQHVnTKVAAQKWAAHUHTQHUHVAAKVQAAKWnUHUQnUHUqWAAQqVAAnVnUg");
	this.shape.setTransform(0.1,0.1);

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

}).prototype = getMCSymbolPrototype(lib.TargetOBJ, new cjs.Rectangle(-159.7,-159.7,319.6,319.6), null);


(lib.personaje = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{init_anim:1});

	// timeline functions:
	this.frame_0 = function() {
		this.stop();
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(100));

	// Capa_2
	this.instance = new lib.Interpolación2("synched",0);
	this.instance.parent = this;
	this.instance.setTransform(185.6,130.3,1,1,0,0,0,-51.2,-29.9);

	this.timeline.addTween(cjs.Tween.get(this.instance).to({regX:-42.6,regY:-27.7,rotation:-45,x:194.3,y:132.4},99).wait(1));

	// Capa_3
	this.instance_1 = new lib.Interpolación3("synched",0);
	this.instance_1.parent = this;
	this.instance_1.setTransform(105.2,136.8,1,1,0,0,0,40.6,-23.4);

	this.timeline.addTween(cjs.Tween.get(this.instance_1).to({regX:55.5,regY:-25.6,rotation:45,x:120.1,y:134.7},99).wait(1));

	// Capa_4
	this.instance_2 = new lib.Interpolación4("synched",0);
	this.instance_2.parent = this;
	this.instance_2.setTransform(175.7,395.5);

	this.timeline.addTween(cjs.Tween.get(this.instance_2).to({startPosition:0},99).wait(1));

	// Capa_5
	this.instance_3 = new lib.Interpolación5("synched",0);
	this.instance_3.parent = this;
	this.instance_3.setTransform(109.6,395.5);

	this.timeline.addTween(cjs.Tween.get(this.instance_3).to({startPosition:0},99).wait(1));

	// Capa_6
	this.instance_4 = new lib.Interpolación6("synched",0);
	this.instance_4.parent = this;
	this.instance_4.setTransform(138.8,229);

	this.timeline.addTween(cjs.Tween.get(this.instance_4).to({startPosition:0},99).wait(1));

	// Capa_7
	this.instance_5 = new lib.Interpolación7("synched",0);
	this.instance_5.parent = this;
	this.instance_5.setTransform(137.9,48);

	this.timeline.addTween(cjs.Tween.get(this.instance_5).to({y:13.9},99).wait(1));

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(-1,-1,303.4,460.7);


(lib.drag_OBJ = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});

	// Capa_2
	this.dot = new lib.Símbolo1();
	this.dot.name = "dot";
	this.dot.parent = this;
	this.dot.setTransform(0,0,1,1,0,0,0,21.9,21.9);

	this.timeline.addTween(cjs.Tween.get(this.dot).wait(1));

	// Capa_1
	this.shape = new cjs.Shape();
	this.shape.graphics.f("rgba(0,51,204,0.518)").s().p("AnPHPQjAi/AAkQQAAkODAjBQDBjAEOAAQEQAAC/DAQDBDBAAEOQAAEQjBC/Qi/DBkQAAQkOAAjBjBg");

	this.timeline.addTween(cjs.Tween.get(this.shape).wait(1));

}).prototype = getMCSymbolPrototype(lib.drag_OBJ, new cjs.Rectangle(-65.6,-65.6,131.2,131.2), null);


// stage content:
(lib.drag_DropPausas = function(mode,startPosition,loop) {
	this.initialize(mode,startPosition,loop,{});

	// timeline functions:
	this.frame_0 = function() {
		createjs.Touch.enable(stage);
		//createjs.Sound.play("win");
		
		this.marca_DRG.on("mousedown", onMouseDown.bind(this));
		this.marca_DRG.on("pressmove", onMouseMove.bind(this));
		this.marca_DRG.on("pressup", onMouseUp.bind(this));
		this.marca_DRG.objective = this.objetivo_OBJ;
		this.marca_DRG.limite = this.limit_mc;
		
		this.on("tick", update.bind(this));
		function update(event) {}
		
		function fl_MouseClickHandler() {
			if (my_audio_clip.paused == true) {
				my_audio_clip.paused = false;
			} else {
				my_audio_clip.paused = true;
			}
		}
		
		var OrignX = this.marca_DRG.x;
		var OrignY = this.marca_DRG.y;
		
		var currentFrame = this.persona_mc.currentFrame;
		var direction = 1;
		
		function onMouseDown(e) {
			direction = 1;
			var itm = e.currentTarget;
			itm.offset = {
				x: 0,
				y: 0
			};
			var pt = itm.parent.globalToLocal(e.stageX, e.stageY);
			itm.offset.x = pt.x - itm.x;
			itm.offset.y = pt.y - itm.y;
			itm.drag = true;
		}
		
		
		function onMouseMove(e) {
			var itm = e.currentTarget;
			var pt = itm.localToLocal(itm.dot.y, itm.dot.x, itm.limite);
			var frame_anim = parseInt(pt.y);
			if (direction <= 100) {
				direction++;
			}
			this.persona_mc.gotoAndStop(direction);
			console.log(frame_anim, direction);
		
			if (itm.limite.hitTest(pt.x, pt.y)) {
				itm.drag = false;
				itm.x = OrignX;
				itm.y = OrignY;
				$("#result_mc").val("chocaste");
				this.persona_mc.gotoAndStop(1);
			} else {
				if (itm.drag) {
					var pt = itm.parent.globalToLocal(e.stageX, e.stageY);
					itm.x = pt.x - itm.offset.x;
					itm.y = pt.y - itm.offset.y;
					$("#result_mc").val("Moviendose");
				}
			}
		}
		
		function onMouseUp(e) {
			direction = 1;
			var itm = e.currentTarget;
			var pt = itm.localToLocal(itm.dot.y, itm.dot.x, itm.objective.box);
			if (itm.objective.box.hitTest(pt.x, pt.y)) {
				itm.x = itm.objective.x;
				itm.y = itm.objective.y;
				$("#result_mc").val("Ganaste");
				playSound("win");
			} else {
				itm.x = OrignX;
				itm.y = OrignY;
			}
		}
		
		function evaluaEstado(val) {
			//txt_result.text = string(txt_e);
		}
	}

	// actions tween:
	this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1));

	// FlashAICB
	this.persona_mc = new lib.personaje();
	this.persona_mc.name = "persona_mc";
	this.persona_mc.parent = this;
	this.persona_mc.setTransform(203.8,355.2,1,1,0,0,0,150.7,229.3);

	this.result_mc = new lib.an_TextInput({'id': 'result_mc', 'value':'', 'disabled':false, 'visible':true, 'class':'ui-textinput'});

	this.result_mc.setTransform(529.1,101,1,1,0,0,0,50,11);

	this.limit_mc = new lib.limite();
	this.limit_mc.name = "limit_mc";
	this.limit_mc.parent = this;
	this.limit_mc.setTransform(752.8,393.7,1,1,0,0,0,247.3,259.2);

	this.marca_DRG = new lib.drag_OBJ();
	this.marca_DRG.name = "marca_DRG";
	this.marca_DRG.parent = this;
	this.marca_DRG.setTransform(556.4,600.4);

	this.objetivo_OBJ = new lib.TargetOBJ();
	this.objetivo_OBJ.name = "objetivo_OBJ";
	this.objetivo_OBJ.parent = this;
	this.objetivo_OBJ.setTransform(945.5,186.2,0.464,0.464);

	this.timeline.addTween(cjs.Tween.get({}).to({state:[{t:this.objetivo_OBJ},{t:this.marca_DRG},{t:this.limit_mc},{t:this.result_mc},{t:this.persona_mc}]}).wait(1));

}).prototype = p = new cjs.MovieClip();
p.nominalBounds = new cjs.Rectangle(727.6,439.5,967.1,576.5);
// library properties:
lib.properties = {
	id: '4BBD3DAD411B4E3185F410FBD46734F1',
	width: 1350,
	height: 700,
	fps: 24,
	color: "#FFFFCC",
	opacity: 1.00,
	manifest: [
		{src:  odir + "/sounds/lost.mp3", id:"lost"},
		{src: odir +"/sounds/win.mp3", id:"win"},
		{src: bdir + "assets/js/jquery-1.11.0.min.js", id:"lib/jquery-2.2.4.min.js"},
		{src: odir +"/components/sdk/anwidget.js", id:"sdk/anwidget.js"},
		{src: odir +"/components/ui/src/textinput.js", id:"an.TextInput"}
	],
	preloads: []
};



// bootstrap callback support:

(lib.Stage = function(canvas) {
	createjs.Stage.call(this, canvas);
}).prototype = p = new createjs.Stage();

p.setAutoPlay = function(autoPlay) {
	this.tickEnabled = autoPlay;
}
p.play = function() { this.tickEnabled = true; this.getChildAt(0).gotoAndPlay(this.getTimelinePosition()) }
p.stop = function(ms) { if(ms) this.seek(ms); this.tickEnabled = false; }
p.seek = function(ms) { this.tickEnabled = true; this.getChildAt(0).gotoAndStop(lib.properties.fps * ms / 1000); }
p.getDuration = function() { return this.getChildAt(0).totalFrames / lib.properties.fps * 1000; }

p.getTimelinePosition = function() { return this.getChildAt(0).currentFrame / lib.properties.fps * 1000; }

an.bootcompsLoaded = an.bootcompsLoaded || [];
if(!an.bootstrapListeners) {
	an.bootstrapListeners=[];
}

an.bootstrapCallback=function(fnCallback) {
	an.bootstrapListeners.push(fnCallback);
	if(an.bootcompsLoaded.length > 0) {
		for(var i=0; i<an.bootcompsLoaded.length; ++i) {
			fnCallback(an.bootcompsLoaded[i]);
		}
	}
};

an.compositions = an.compositions || {};
an.compositions['4BBD3DAD411B4E3185F410FBD46734F1'] = {
	getStage: function() { return exportRoot.getStage(); },
	getLibrary: function() { return lib; },
	getSpriteSheet: function() { return ss; },
	getImages: function() { return img; }
};

an.compositionLoaded = function(id) {
	an.bootcompsLoaded.push(id);
	for(var j=0; j<an.bootstrapListeners.length; j++) {
		an.bootstrapListeners[j](id);
	}
}

an.getComposition = function(id) {
	return an.compositions[id];
}

function _updateVisibility(evt) {
	if((this.getStage() == null || this._off || this._lastAddedFrame != this.parent.currentFrame) && this._element) {
		this._element.detach();
		stage.removeEventListener('drawstart', this._updateVisibilityCbk);
		this._updateVisibilityCbk = false;
	}
}
function _handleDrawEnd(evt) {
	var props = this.getConcatenatedDisplayProps(this._props), mat = props.matrix;
	var tx1 = mat.decompose(); var sx = tx1.scaleX; var sy = tx1.scaleY;
	var dp = window.devicePixelRatio || 1; var w = this.nominalBounds.width * sx; var h = this.nominalBounds.height * sy;
	mat.tx/=dp;mat.ty/=dp; mat.a/=(dp*sx);mat.b/=(dp*sx);mat.c/=(dp*sy);mat.d/=(dp*sy);
	this._element.setProperty('transform-origin', this.regX + 'px ' + this.regY + 'px');
	var x = (mat.tx + this.regX*mat.a + this.regY*mat.c - this.regX);
	var y = (mat.ty + this.regX*mat.b + this.regY*mat.d - this.regY);
	var tx = 'matrix(' + mat.a + ',' + mat.b + ',' + mat.c + ',' + mat.d + ',' + x + ',' + y + ')';
	this._element.setProperty('transform', tx);
	this._element.setProperty('width', w);
	this._element.setProperty('height', h);
	this._element.update();
}

function _tick(evt) {
	var stage = this.getStage();
	stage&&stage.on('drawend', this._handleDrawEnd, this, true);
	if(!this._updateVisibilityCbk) {
		this._updateVisibilityCbk = stage.on('drawstart', this._updateVisibility, this, false);
	}
}


})(createjs = createjs||{}, AdobeAn = AdobeAn||{});
var createjs, AdobeAn;